---
title: "Hell-Yeah there is a hellno"
author: "Peter Mei√üner"
date: "2015-12-14"
output: 
  html_document: 
    keep_md: yes
---



# Introduction

Base R's `stringsAsFactors` default setting is among the most most 
  often complained about and re-set piecees of code in the whole R infrastructure. 
  A search through the source code of all [CRAN packages in December 2015 
  lists 3,492](https://github.com/search?p=3&q=language%3Ar+user%3Acran+stringsAsFactors&ref=searchresults&type=Code&utf8=%E2%9C%93) code snippets with `stringsAsFactors`. Most of 
  the time it is used to overide the default of `data.frame()` or `as.data.frame()`.
  
  The hellno package provides an explicit solution to the problem without 
  changing R itself or having to mess around with options. The approach is simple:
it provides reimplementations of`data.frame()` and `as.data.frame()` that are 
in fact oonly wrappers around base R's `data.frame()` and 
  `as.data.frame()` with `stringAsFactors` option set to `HELLNO` 
  (which in turn equals to `FALSE`; see here
  [tweet1](https://twitter.com/quominus/status/661511485483450368), here [tweet2](https://twitter.com/xieyihui/status/655063106024964096), here [tweet3](https://twitter.com/stefanbache/status/672796075263180800), and very much here [sillylogic](https://github.com/nutterb/sillylogic/blob/master/README.md)) by default.

# Using hellno interactively

**R's default behaviour...**
```{r}
df1 <- data.frame(a=letters[1:3])
df1$a
class(df1$a)
```


**R's default behaviour after loading the package**
```{r}
library(hellno)

df2 <- data.frame(a=letters[1:3])
df2$a
class(df2$a)
```

# Using hellno for package development

While using the hellno package in interactive R mode is nice, in fact it could 
have been achieved simply by doing something like this: `options("stringsAsFactors"=FALSE)`. 
The strength of hellno is that it can be imported when writing packages and therefore 
providing `as.data.frame()` and `data.frame()` with `stringsAsFactors` option 
consistently set to `FALSE` throughout the whole package. 
Once imported `stringsAsFactors=FALSE` will be the default for all uses of `data.frame()` and `as.data.frame()` within all package functions BUT NOT OUTSIDE OF IT. 
Thus it provides a way to ease programming while also ensuring that package users can
still choose which flavor of `stringsAsFactors` they like best. 


Let us see how this works following a little example. Again, let us start with loading hellno package:

```{r} 
library(hellno)
data.frame(a=letters[1:2])$a 
```

As shown before, character vector are not transformed to factor.

We unload hellno again to start clean. 

```{r}
unloadNamespace("hellno")
```

Now we install the hellnotest package from Github and load it. The package uses hellno internally in two functions. While internal uses of `data.frame()` and `as.data.frame()` will work with `stringsAsFactors=FALSE` as default this does not change how things work everywhere else. 


```{r}
if( !("hellnotests" %in% installed.packages()) ){
  devtools::install_github("petermeissner/hellnotests")
}

library(hellnotests)
data.frame(a=letters[1:2])$a 
```

While all functions within the package use hellno's alternative implementations:

```{r}
hellno_df
```

... and hence for them string conversion is no matter anymore:

```{r}
hellno_df()
```


... and once again to bring the point home: 

```{r}
data.frame(a=letters[1:2])$a 
```

***WRITING PACAKGES WITH HELLNO DOES NOT CHANGE OUTSIDE BEHAVIOR.***

Have fun. 
